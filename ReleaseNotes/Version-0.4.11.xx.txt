Version 0.4.11.xx consists of the following Builds:


Build #1409 -- Version 0.4.11.xx
--------------------------------

* Fix Bugs In []STOP And []TRACE

Directory trunk:

EXECDFN.C:
  In <ExecuteFunction_EM_YY>, note that the argument <lptkFunc> may be NULL.

PRIMFNS.C:
  In <MakeNoValue_YY>, note that the argument <lptkFunc> may be NULL.
  In <MakeNoValue_YY>, if <lptkFunc> is NULL, use -1 as the character index.
  In <IsTknTrain>, ensure that the argument is a function array before processing it as one.

QF_STRACE.C:
  Remove DEBUG requirement from named MFO in monadic and dyadic []STOP and []TRACE.


Directory trunk\htdocs:

INDEX-BODY.AHTML:
  Document that []STOP and []TRACE are implemented as optional facilities of the EAS.


Build #1408 -- Version 0.4.11.xx
--------------------------------

* Miscellaneous Changes

Directory trunk:

ERRMSG.C:
  Improve comments.

MPFNS.C:
  In DEBUG mode, display argument and intermediate result VFP numbers.

SC_LOAD.C:
  Use <_wtoi64> in favor of <sscanfW> as the former is much faster.

Directory trunk\htdocs:

INDEX-BODY.AHTML:
  Use special Bitcoin font to display official Unicode Bitcoin currency symbol.


Build #1407 -- Version 0.4.11.xx
--------------------------------

* If Syntax Coloring Is Turned Off, Use Default Tex And Background Colors For Session

Directory trunk:

EDITFCN.C:
  In <LclECPaintHook>, if we're not syntax coloring the line, use the default
    text and background colors for session coloring.


Build #1406 -- Version 0.4.11.xx
--------------------------------

* Display VFP Numbers In E-Format If Too Small Or Too Large

Directory trunk:

DISPLAY.C:
  In <FormatAplVfpFC>, display VFP numbers in E-format if too small or too large.


Build #1405 -- Version 0.4.11.xx
--------------------------------

* Switch To New GSL Binary And Directory

Directory trunk:

MAKEFILE.INC:
  Require macro <XWIN> for use with new GSL directory.
  Switch to binary download of GSL into new directory so as to update to
    the most recent version.

MAKEFILE.PRO.PARSE:
  Improve comments.

MAKEFILE.W32:
MAKEFILE.W64:
  Define <XWIN> macro for use with new GSL directory.


Build #1404 -- Version 0.4.11.xx
--------------------------------

* Implement []STOP and []TRACE

Directory trunk:

COMMON.C:
  Define <AllocateGlobalArray> as handy function for widespread use as
    suggested by Rob Wallick.

COMPRO.H:
MAKEFILE.INC:
MAKEFILE.SRC:
  Include <qf_strace.*> in the build.

CONVERT.C:
  Define <ConvertToInteger_SCT> for use in many places.

EXECDFN.C:
  Include Trace line flag in all calls to <ParseLine>.
  In <ExecuteFunction_EM_YY>, handle Stop & Trace.

EXECMFN.C:
IMMEXEC.C:
PF_UTACKJOT.C:
  Include Trace line flag in all calls to <ParseLine>.

FH_PARSE.H:
  In <DFN_HEADER> struc, define Stop & Trace exit flags for line 0.

PARSELINE.C:
  In <plRedGO_A> and <ParseLine>, handle Stop & Trace.

PL_PARSE.H:
  In <PLLOCLAVARS> struc, define Stop & Trace exit flags and Stmt number.

QF_STRACE.C:
  Define file to handle calls to []STOP & []TRACE.

SYSVARS.C:
  Include []STOP & []TRACE in system vars & functions table.


Build #1403 -- Version 0.4.11.xx
--------------------------------

* Fix Bug In Syntax Analyzer

Directory trunk:

PARSELINE.C:
  Fix bug in syntax analyzer missing case of "{is})", "{is}]", "{is}{rbrace}", and "{is}EOS"
  Define the above cases as returning soSYNR.
  In <PARSELINE_ERROR>, if the current object is valid and in use, free it only
    if it's a function or var.  This code can fail with the above cases.
  Improve comments.

PARSELINE.H:
  Fix bug in syntax analyzer missing case of "{is})", "{is}]", "{is}{rbrace}", and "{is}EOS"
  Define the above cases as returning soSYNR.


Build #1402 -- Version 0.4.11.xx
--------------------------------

* Fix Bug In Domino Preventing Clean Up After Calling Magic Function

Directory trunk:

PF_DOMINO.C:
  In <PrimFnMonDomino_EM_YY> when calling the magic function, the code returns
    immediately instead of saving the result and jumping to the function tail which
    allows it to clean up.


Build #1401 -- Version 0.4.11.xx
--------------------------------

* Fix Bug In Tokenization

Directory trunk:

TOKENIZE.C:
  In <fnDiaDone>, catch trailing diamonds after a control structure at the end of a
    line.  We don't handle them correctly elsewhere.


Build #1400 -- Version 0.4.11.xx
--------------------------------

* Fix Bug In Syntax Analyzer

Directory trunk:

PARSELINE.C:
  Fix bug in syntax analyzer when assigning a name inside brackets such as with
    z{is}1 2 3 {diamond} z[f z{is}...]


Build #1399 -- Version 0.4.11.xx
--------------------------------

* Optionally Display MP Suffix of 'x' or 'v'

Directory trunk:

CUSTOMIZE.C:
DEFINES.H:
DISPLAY.C:
EXTERNS.H:
INIFILE.C:
MAIN.RC:
QF_FMT.C
RESOURCE.H:
SC_LOAD.C
SC_SAVE.C:
  Optionally display multi-precision numbers with a suffix of 'x' or 'v' as appropriate.


Build #1398 -- Version 0.4.11.xx
--------------------------------

* More DEBUG Code

Directory trunk:

MACROS.H:
RESDEBUG.C:
RESDEBUG.H:
  More DEBUG code.


Build #1397 -- Version 0.4.11.xx
--------------------------------

* Fix Bugs In Syntax Analyzer

Directory trunk:

PARSELINE.C:
PARSELINE.H:
SYNOBJ.H:
  Fix bugs in syntax analyzer.


Build #1396 -- Version 0.4.11.xx
--------------------------------

* Fix Bugs In Helper Functions From Previous Build

Directory trunk:

COMMON.C:
  Fix bugs in <strcpyn> and <strcpynW> w.r.t. # bytes to copy.


Build #1395 -- Version 0.4.11.xx
--------------------------------

* Change Rational Comparisons From Exact (No []CT) To Inexact (Use []CT)

Directory trunk:

DEFINES.H:
  Increase default sizes of static virtual alloc vars.
  Improve comments.
  Define more library function aliases.
  Change rational comparisons from exact (no []CT) to inexact (use []CT).

PF_EPSILON.C:
  Change rational comparisons from exact (no []CT) to inexact (use []CT).

PF_EQUALUND.C:
  Update copyright notice.
  Change rational comparisons from exact (no []CT) to inexact (use []CT).

PF_IOTA.C:
  Change rational comparisons from exact (no []CT) to inexact (use []CT).


Build #1394 -- Version 0.4.11.xx
--------------------------------

* Include "Hdr" In Name Of Result Of MyGlobalLock
* In IF Stmts Always Compare Ptr Against NULL
* Mark Argument To <CalcNumIDs> As Pointer To Var Header

Directory trunk:

ERRMSG.C:
  Include "Hdr" in name of result of MyGlobalLock.
  In IF stmts always compare ptr against NULL.

QF_AT.C:
QF_EX.C:
QF_MF.C:
QF_NC.C:
  Include "Hdr" in name of result of MyGlobalLock.
  Mark argument to <CalcNumIDs> as pointer to var header.
  In IF stmts always compare ptr against NULL.

QF_SYSID.C:
  Include "Hdr" in name of result of MyGlobalLock.
  In IF stmts always compare ptr against NULL.
  Define and use new function to handle filling in result token for globals.

YYFNS.C:
  Define and use new function to handle filling in result token for globals.


Build #1393 -- Version 0.4.11.xx
--------------------------------

* Fix Typo In Magic Function
* Catch Errors When Initializing Magic Functions

Directory trunk:

EXECMFN.C:
  Catch errors when initializing magic functions.

MF_MULTISET.H:
  Fix typo in magic function for Multiset Match.


Build #1392 -- Version 0.4.11.xx
--------------------------------

* Handle MOPN A And MOPN A Syntax

Directory trunk:

PARSELINE.C:
PARSELINE.H:
  Handle MOPN A and MOPN A syntax which previously signaled a SYNTAX ERROR.


Build #1391 -- Version 0.4.11.xx
--------------------------------

* Clean Up Code For []NL

Directory trunk:

QF_NL.C:
  Clean up code for []NL.


Build #1390 -- Version 0.4.11.xx
--------------------------------

* Define New Magic Function To Handle N-Wise Reduction With Left Argument Of 1

Directory trunk:

EXECMFN.C:
EXECMFN.H:
MF_ROS.H:
PO_SLASH.C:
  Define new magic function to handle N-wise reduction with left argument of 1.


Build #1389 -- Version 0.4.11.xx
--------------------------------

* Fix Bug In -4 Circle Assembler Function

Directory trunk:

DBGBRK32.ASM:
DBGBRK64.ASM:
  In <iAsmCircleN4Int> and <iAsmCircleN4Flt>, change the assembler code to conform to the EAS definition of that function.


Build #1388 -- Version 0.4.11.xx
--------------------------------

* Fix Bug In Crash Message Box

Directory trunk:

CRASH.C:
  In <CCWndProc>, pass NULL handle to MessageBox so as to allow the user to copy data from the session.


Build #1387 -- Version 0.4.11.xx
--------------------------------

* Fix Bug In lstrcpy/lstrcpyn/lstrcat Functions

Directory trunk:

COMMON.C:
  Define additional helper functions.
  Fix typo in comment.
  Define and use local strcpyW/strcpyn/strcpnW/strcatW functions.

CS_PARSE.Y:
CUSTOMIZE.C:
DISPDBG.C:
DISPLAY.C:
EDITFCN.C:
EXCEPT.C:
FH_PARSE.Y:
INIFILE.C:
MAIN.C:
MPFNS.C:
PARSELINE.C:
PF_CSTAR.C:
PF_DSTILE.C:
PN_PARSE.Y:
PN_PROC.C:
PRIMSPEC.C:
QF_DR.C:
QF_FMT.C:
QF_SYSVER.C:
SC_COMMON.C:
SC_COPY.C:
SC_DROP.C:
SC_IN.C:
SC_INASCII.C:
SC_LIB.C:
SC_LOAD.C:
SC_OUT.C:
SC_SAVE.C:
SESSMAN.C:
SYMTAB.C:
TABCTRL.C:
TOKENIZE.C:
UPDATES.C:
VER.C:
WEBCOLORS.C:
  Define and use local strcpyW/strcpyn/strcpnW/strcatW functions.

ERRMSG.C:
  Update copyright notice.
  In <BreakMessage>, ensure that the SIS layer and the function name is valid before using.
  Define and use local strcpyW/strcpyn/strcpnW/strcatW functions.

SAVEFCN.C:
  Update copyright notice.
  Define and use local strcpyW/strcpyn/strcpnW/strcatW functions.
  In <SaveFunctionCom>, check for valid ptr before using.


Directory trunk\WineHQ:

EDITCTRL.C:
LOCAL.H:
  Define and use local strcpyW/strcpyn/strcpnW/strcatW functions.


Build #1386 -- Version 0.4.11.xx
--------------------------------

* Fix Bug In Syntax Coloring When Selecting Black

Directory trunk:

WEBCOLORS.C:
  Fix bug in syntax coloring when selecting black.


Build #1385 -- Version 0.4.11.xx
--------------------------------

* Optimize Display Of Vector-Like Arrays

Directory trunk:

DISPLAY.C:
  In <DisplayGlbArr_EM>, use array header names for vars, etc.
  Check for non-empty non-nested vector-like arrays and display via subfunction.
  Define <FormatImmedPtr> to more easily display single values via a ptr.
  Define function to display non-empty non-nested vector-like arrays, without
    running into a LIMIT ERROR on a guard page in case the vector is too long.
  Define function to check for Terminal Codes when displaying char arrays.


Build #1384 -- Version 0.4.11.xx
--------------------------------

* Fix Bug In )COPY With No Arguments

Directory trunk:

SC_COPY.C:
  In <CopyWsVars>, a recent change to convert to lowercase system variable names
    introduced a bug when there are no arguments to the )COPY command.


Build #1383 -- Version 0.4.11.xx
--------------------------------

* Fix SYNTAX ERROR In '] MOP' And '} MOP'

Directory trunk:

PARSELINE.C:
PARSELINE.H:
  The cases '] MOP/MOPN/HY' and '} MOP/MOPN/HY' signal a SYNTAX ERROR and shouldn't.


Build #1382 -- Version 0.4.11.xx
--------------------------------

* Fix Bug In []EC '{goto}1'

Directory trunk:

PRIMFNS.C::
  In <GetSISLayer>, don't skip over ErrCtrl SIS layers as {goto} needs to modify the []EC layer, not the calling layer.


Build #1381 -- Version 0.4.11.xx
--------------------------------

* Fix Bug In 1 f/ X Where X Is A Nested or Global Numeric Scalar

Directory trunk:

MF_ROS.H:
  Change code so as to always return a vector.

PO_SLASH.C:
  Improve comments.


Build #1380 -- Version 0.4.11.xx
--------------------------------

* Include File Omitted From Last Build
* Fix Bug In <makefile.inc> Missing Crash Server File

Directory trunk:

DATATYPE.H:
  Define new ALLTYPES entry.

MAKEFILE.INC:
  Update copyright notice.
  Include compiler flags for new optimizations.
  Include additional CrashServer file in .zip file.


Build #1379 -- Version 0.4.11.xx
--------------------------------

* Fix Bug In Index Set With Type Promotion Of Immediate

Directory trunk:

PF_INDEX.C:
  In <ArrayIndexSetSingLst_EM>, promote the right arg to result type before storing in result.


Build #1378 -- Version 0.4.11.xx
--------------------------------

* Allow Double Quotes In )IN and )OUT
* Allow )DROP to Drop ATF Files

Directory trunk:

COMMON.C:
  Improve comments.
  Define common function to strip off double quotes from a string, also handling leading/trailing white space.

SC_DROP.C:
  Update copyright notice.
  Improve comments.
  Check for .atf files and drop them if the extension is explicit.

SC_IN.C:
SC_OUT.C:
  Update copyright notice.
  Strip off double quotes from the filename.


Build #1377 -- Version 0.4.11.xx
--------------------------------

* Fix Bug In )LIB Producing Duplicate Values

Directory trunk:

SC_LIB.C:
  Update copyright notice.
  Fix bug in )LIB producing duplicate values due to not taking into account a leading double quote.


Build #1376 -- Version 0.4.11.xx
--------------------------------

* Fix Bug In Primitive Function Encode

Directory trunk:

PF_DTACK.C:
  Fix bug introduced in an earlier Build where the right arg is not reloaded for a new column in the left arg.


Build #1375 -- Version 0.4.11.xx
--------------------------------

* Fix Bug In Syntax Analyzer

Directory trunk:

PARSELINE.C:
PARSELINE.H:
  Fix bug where stmts such as A[NAM{is}+/A] don't parse correctly because the binding strength of
    "HY A" and others is zero which then binds "A]" too soon.


Build #1374 -- Version 0.4.11.xx
--------------------------------

* Fix Bug Which Crashes When Editing A Function After Typing A Tab

Directory trunk:

EDITFCN.C:
  Fix bug in <LclEditCtrlWndProc/WM_KEYDOWN/VK_TAB> which miscalculates (off by 1)
    the # spaces to insert.

VER.RC:
  Increment version # to 0.4.11.xx.
